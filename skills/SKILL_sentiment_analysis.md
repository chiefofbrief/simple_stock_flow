# Sentiment Analysis Skill

**⚠️ DRAFT - This skill file is a preliminary draft and may require refinement based on actual usage patterns.**

## Prerequisites

**Before executing this skill, you must:**
1. Read this entire skill file - Contains workflow steps and output format requirements
2. Have completed statement analysis (projection seeds and investigation items established)

**Required Files:**
- `{TICKER}_tracking.md` - Analysis tracking (statement analysis must be complete)
- `{TICKER}_sentiment.md` - Aggregated sentiment markdown (generated by sentiment.py master script)
- Optional: `{TICKER}_ANALYSIS_statement.md` - For context on investigation items

**How to Generate Sentiment File:**
```bash
# Recommended: All sources with defaults (news: 3mo, reddit: 30d, social: this-month)
python scripts/sentiment.py {TICKER} --all

# Custom timelines if needed
python scripts/sentiment.py {TICKER} --all --news-months 6 --reddit-days 60
```

**Output Location:** `data/analysis/{TICKER}/{TICKER}_sentiment.md`

**Context Sources:**
- Primary: `{TICKER}_tracking.md` (projection seeds baseline & investigation items)
- Additional detail: `{TICKER}_ANALYSIS_statement.md` if needed for context

---

## Analysis Methodology

**Data Sources:**
The sentiment markdown aggregates four sources:
1. **News** - Perigon + AlphaVantage (default: 3-month lookback)
2. **Reddit** - r/stocks, r/ValueInvesting, r/options (default: 30-day lookback)
3. **TikTok** - Trend analysis (default: this-month)
4. **YouTube** - Video metadata and analysis (default: this-month)

**Framework:**
Focus on three objectives:
1. **Projection seeds** - Extract material events/sentiment affecting projection confidence for each seed
2. **Investigation items** - Address specific items flagged in prior analyses (both seed-linked and non-seed)
3. **Material events & sentiment** - Identify risks/catalysts and assess market sentiment

**Materiality Filtering:**
- News: Focus on events affecting fundamentals, not just price movements
- Social Media: Look for recurring themes across multiple posts/videos, not isolated opinions
- Determine materiality based on impact on investigation items or projection seeds

**Analysis Period:**
- News: Default 3 months (or since most recent 10-K filing date, whichever is shorter)
- Reddit: Default 30 days
- Social Media: Default current month
- Sentiment focus: Most recent period for current sentiment + full timeline for trend analysis

---

## Workflow

The analysis is conducted in 3 passes with pauses between key sections.

**Tone/Length Guidance:** Elaborate on critical or anomalous items; be brief on standard items. Include evidence (headlines, post excerpts, dates, sources). Cite specific content from sentiment markdown. Let importance drive length.

### Pass 1: Seed-First Review (External Perspective on Projection Seeds)

**Objective:** What external sentiment validates or challenges projection confidence for each seed, and does sentiment address seed-linked investigation items?

**Action:**
1. Read `{TICKER}_tracking.md` "Projection Seeds Baseline & Status" section (includes seed-linked investigation items)
2. Review `{TICKER}_sentiment.md` to identify events/themes affecting each projection seed
3. Look across all sources (news + social) for validation or contradiction of company narrative
4. Extract material headlines/themes with dates and sources
5. Note if seed-linked investigation items were addressed

**The 8 Projection Seeds:**
1. Revenue
2. COGS %
3. SG&A %
4. R&D %
5. Depreciation & Amortization
6. Capital Expenditures
7. Total Debt
8. Working Capital Components

**Begin writing** `{TICKER}_ANALYSIS_sentiment.md`:
See Required Output Format section for structure.

**PAUSE** - User reviews

---

### Pass 2: Non-Seed Items, Material Events & Sentiment Analysis

**Objective:** Address non-seed investigation items and proactively identify material events and assess market sentiment

**Action:**
1. Read `{TICKER}_tracking.md` "Open Investigation Items - Non-Seed Items" section
2. Review `{TICKER}_sentiment.md` for commentary addressing non-seed investigation items
3. Proactive search for material events (focus on external-only information):
   - **M&A/Strategic:** Unannounced deals, rumors, partnerships
   - **Competitive Dynamics:** Competitor moves, market disruption, industry trends
   - **Market Reaction:** Analyst upgrades/downgrades, retail investor sentiment
   - **Product/Service:** Launch reception, customer feedback, quality issues
   - **Social Media Trends:** Viral moments, brand perception shifts

4. Multi-source sentiment synthesis:
   - **News Sentiment:** Institutional perspective (default: 3 months)
   - **Reddit Sentiment:** Retail investor perspective (default: 30 days)
   - **Social Media (TikTok/YouTube):** Consumer brand perception (default: this-month)
   - **Convergence/Divergence:** Where sources align vs. contradict
   - **Trend Analysis:** Improving/Stable/Deteriorating across timeframe
   - **Volume Analysis:** Article/post counts, engagement metrics

**Continue updating** `{TICKER}_ANALYSIS_sentiment.md`:
See Required Output Format section for structure.

**PAUSE** - User reviews

---

### Pass 3: Synthesis & Thesis Impact

**Objective:** How does external sentiment affect the undervaluation thesis and projection confidence?

**Action:**
1. Synthesize findings from Passes 1-2
2. Assess overall narrative validation (where sentiment validates vs contradicts company statements)
3. Cross-source analysis: What do institutional (news) vs retail (reddit) vs consumer (social) perspectives reveal?
4. Identify key risks and catalysts
5. Assess projection confidence per seed based on all sentiment findings

**Finalize** `{TICKER}_ANALYSIS_sentiment.md`:
See Required Output Format section for structure.

**Update** `{TICKER}_tracking.md`:
- Mark resolved investigation items as [RESOLVED] (or remove if fully addressed)
- Add new investigation items discovered during analysis
- Update "Projection Seeds Baseline & Status" section with sentiment insights

**PAUSE** - User reviews

---

## Required Output Format

`{TICKER}_ANALYSIS_sentiment.md` structure (built progressively through Passes 1-3):

```markdown
# {TICKER} Sentiment Analysis

## TLDR
[Written in Pass 3]

**Key Findings:**
- [Material events affecting thesis with dates and sources]
- [Where sentiment validates vs. contradicts company narrative]
- [Institutional vs Retail vs Consumer perspective divergences]

**Unresolved Items:**
- [Items not addressed by any sentiment source]

**Overall Sentiment:** [Bullish/Neutral/Bearish]
- **News:** [Bullish/Neutral/Bearish] (Trend: Improving/Stable/Deteriorating)
- **Reddit:** [Bullish/Neutral/Bearish] (Engagement: High/Medium/Low)
- **Social Media:** [Positive/Neutral/Negative] (Brand perception)

**Analysis Period:**
- News: {START_DATE} to {END_DATE}
- Reddit: {START_DATE} to {END_DATE}
- Social Media: {PERIOD}

---

## External Perspective on Projection Seeds

For each projection seed, analyze sentiment impact:

### {Seed Name}
**Projection Confidence:** [High/Medium/Low]
**Change from Prior:** [↑/↓/—] {Reason}
**Key Findings:** {Impact on projections; validation or contradiction of baseline}
**Seed-Linked Investigation Items:** {Addressed/Still unresolved}

**Supporting Sentiment:**

**News:**
> [{DATE}] - {Source}: {headline/summary}

**Reddit:**
> [{DATE}] - r/{subreddit}: {theme/excerpt from high-engagement posts}

**Social Media:**
> {Platform}: {trend/theme summary}

---

## Open Items

### New Investigation Items
- [INVESTIGATE] Item description | Seeds: X, Y | Source: Sentiment Analysis (YYYY-MM-DD)
- [GAP] Item description (sentiment silent) | Seeds: Z | Source: Sentiment Analysis (YYYY-MM-DD)
- [NEW] Material event description | [NON-SEED] Category | Source: Sentiment Analysis (YYYY-MM-DD)

### Material Events Not Captured in Seed Analysis
[Categories: M&A/Strategic, Competitive, Market Reaction, Product/Service, Brand Perception]

**Event Title**
- **Date:** {DATE}
- **Sources:** News / Reddit / Social Media (specify which)
- **Description:** {Summary with citations from sentiment markdown}
- **Impact on Thesis:** {Assessment}

---

## Multi-Source Sentiment Synthesis

### News Sentiment (Institutional Perspective)
**Analysis Period:** {START_DATE} to {END_DATE}

**Current Sentiment:**
- Overall tone: [Bullish/Neutral/Bearish]
- Sentiment score: {score if available}
- Article count: {N articles}
- Source diversity: {Count of unique sources}

**Key Themes:**
- {Theme 1 with supporting headlines}
- {Theme 2 with supporting headlines}

**Trend Analysis:**
- {Improving/Stable/Deteriorating} over analysis period
- Notable sentiment shifts and causes

---

### Reddit Sentiment (Retail Investor Perspective)
**Analysis Period:** {START_DATE} to {END_DATE}

**Overview:**
- Post volume: {N posts}
- Subreddits: r/stocks, r/ValueInvesting, r/options
- Engagement level: [High/Medium/Low]

**Dominant Themes:**
- {Theme 1 with post excerpts/summaries}
- {Theme 2 with post excerpts/summaries}

**Sentiment:**
- Overall tone: [Bullish/Neutral/Bearish]
- vs. News sentiment: [Aligned/Divergent]

---

### Social Media Sentiment (Consumer/Brand Perspective)
**Analysis Period:** {PERIOD}

**TikTok:**
- Trend summary: {What's trending}
- Brand perception: [Positive/Neutral/Negative]
- Key themes: {Themes}

**YouTube:**
- Content themes: {What creators are discussing}
- Engagement: {View counts, comment sentiment if available}
- Brand perception: [Positive/Neutral/Negative]

**Consumer Takeaway:**
- Overall brand health: {Assessment}
- vs. Fundamental analysis: [Aligned/Divergent]

---

### Cross-Source Analysis

**Convergence Points:**
- [Where all sources agree - strongest signals]

**Divergence Points:**
- [Where sources contradict - investigate why]
- Institutional vs Retail: {Differences and implications}
- Financial vs Consumer perspective: {Differences and implications}

**Red Flags:**
- [Sentiment patterns that contradict financial analysis]

**Catalysts:**
- [Positive sentiment drivers across sources]

---

## Unresolved Items
{Detailed breakdown of Open Items - gaps in sentiment coverage, areas where sentiment was silent, items carried forward}

---

## Projection Confidence Assessment

**Per-Seed Confidence:**
| Seed | Prior Confidence | Sentiment Impact | This Analysis | Change | Key Factor |
|------|------------------|------------------|---------------|--------|------------|
| Revenue | Medium | Validates | High | ↑ | Positive product reception across all sources |
| COGS | Medium | Silent | Medium | — | No sentiment coverage |
| ... | ... | ... | ... | ... | ... |

**Impact on Investment Thesis:**
- **Strengths:** [Positive signals, catalysts, validation from sentiment]
- **Weaknesses:** [Risks, contradictions, concerns from sentiment]
- **Divergence Analysis:** [Where different sources reveal different perspectives]
- **Net Assessment:** [Overall impact on thesis - does sentiment support the undervaluation case?]
```

---

## Notes

**Data Source Integration:**
- News provides institutional/analytical perspective
- Reddit reveals retail investor thinking and price catalysts
- Social media (TikTok/YouTube) exposes consumer brand perception
- Cross-source validation is critical - isolated sentiment is less meaningful

**Materiality Thresholds:**
- News: Focus on fundamental impacts, not just price movements
- Reddit: Require multiple high-engagement posts on same theme
- Social Media: Look for sustained trends, not viral anomalies

**Sentiment vs. Fundamentals:**
- Sentiment analysis complements but does not replace financial statement analysis
- Divergences between sentiment and fundamentals can reveal mispricing opportunities
- Be skeptical of sentiment that contradicts strong fundamentals

**Time Periods:**
- News (3 months): Longer for trend analysis
- Reddit (30 days): Shorter for current retail sentiment
- Social (this-month): Shortest for real-time brand perception
- Adjust timelines in master script if different periods are needed

**Citation Requirements:**
- Always cite specific content from `{TICKER}_sentiment.md`
- Include dates, sources, and direct quotes/excerpts
- Link themes back to projection seeds or investigation items

---

**⚠️ DRAFT NOTICE:** This skill file is a preliminary draft. As the sentiment analysis workflow is used in practice, expect refinements to:
- Source weighting methodology
- Materiality thresholds for social media
- Cross-source synthesis framework
- Integration with statement analysis findings
